<div class="menu ms-3" *ngIf="toolbar">
	<ng-container *ngFor="let link of menu">
		<ng-container *ngIf="link.items.length > 0">
			<button mat-button [attr.aria-label]="link.name" [matMenuTriggerFor]="menuToolbar" class="btn" [matTooltip]="link.name"
				#menuTrigger="matMenuTrigger" [matMenuTriggerData]="{ link: link }">
				<mat-icon fontSet="fas" [fontIcon]="link.icon | substringIcon" class="align-baseline h-auto fa-1x"></mat-icon>
				{{ link.name }}
			</button>
		</ng-container>
	</ng-container>
</div>

<mat-menu #menuToolbar class="menu mt-3 mw-100">
	<ng-template matMenuContent let-link="link">
		<div class="container ps-1">
			<ng-container *ngFor="let subMenu of link.items; let i = index">
				<mat-nav-list class="pt-0">
					<ng-container>
						<a mat-menu-item routerLink="#" [href]="subMenu.url" routerLinkActive="active">
							<mat-icon fontSet="fas" [fontIcon]="subMenu.icon | substringIcon"></mat-icon>
							<span mat-line>{{ subMenu.name }}</span>
						</a>
					</ng-container>
				</mat-nav-list>
			</ng-container>
		</div>
	</ng-template>
</mat-menu>

<mat-sidenav-container class="d-flex flex-column overflow-hidden h-100" *ngIf="!toolbar">
	<mat-sidenav #sidenav mode="side" [class.mat-elevation-z4]="true">
		<mat-nav-list>
			<mat-accordion>
				<mat-expansion-panel [class.mat-elevation-z0]="true" *ngFor="let item of menu">
					<mat-expansion-panel-header>
						<mat-icon fontSet="fas" [fontIcon]="item.icon | substringIcon"></mat-icon>
						{{ item.name }}
					</mat-expansion-panel-header>
					<mat-nav-list>
						<ng-container mat-list-item *ngFor="let link of item.items">
							<a mat-list-item routerLink="#" [href]="link.url" routerLinkActive="active">
								<mat-icon fontSet="fas" [fontIcon]="link.icon | substringIcon"></mat-icon>
								<span mat-line>{{ link.name }} {{ link.icon }}</span>
							</a>
						</ng-container>
					</mat-nav-list>
				</mat-expansion-panel>
			</mat-accordion>
        </mat-nav-list>
	</mat-sidenav>
</mat-sidenav-container>
